# ScienceBuddy æŠ€è¡“ä»•æ§˜æ›¸

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

ScienceBuddy ã¯ã€å°å­¦4å¹´ç”Ÿã®ç†ç§‘å­¦ç¿’ï¼ˆç†±ã¨æ¸©åº¦å˜å…ƒï¼‰ã«ãŠã‘ã‚‹ AI å¯¾è©±å‹å­¦ç¿’æ”¯æ´ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚
å­ã©ã‚‚ãŒã€Œå¤‰åŒ–ã€ã«ç€ç›®ã—ã€çµŒé¨“ã‹ã‚‰äºˆæƒ³ã‚’ç«‹ã¦ã€å®Ÿé¨“ã‚’çµŒã¦è€ƒå¯Ÿã‚’ã¾ã¨ã‚ã‚‹å­¦ç¿’ãƒ—ãƒ­ã‚»ã‚¹ã‚’ AI ãŒæ”¯æ´ã—ã¾ã™ã€‚

---

## 2. ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ScienceBuddy System                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ å­¦ç¿’è€…(å…ç«¥) â”‚              â”‚  æ•™å“¡        â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                              â”‚                         â”‚
â”‚         â”‚                              â”‚                         â”‚
â”‚    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”                     â”‚
â”‚    â”‚                     â”‚                 â”‚                     â”‚
â”‚    â–¼                     â–¼                 â–¼                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ ã‚¯ãƒ©ã‚¹/    â”‚    â”‚ AIå¯¾è©±      â”‚   â”‚ å­¦ç¿’     â”‚              â”‚
â”‚  â”‚å‡ºå¸­ç•ªå·    â”‚    â”‚(äºˆæƒ³/è€ƒå¯Ÿ)  â”‚   â”‚ãƒ­ã‚°ç¢ºèª â”‚              â”‚
â”‚  â”‚é¸æŠ        â”‚    â”‚             â”‚   â”‚          â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚       â”‚                   â”‚                 â”‚                   â”‚
â”‚       â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚                   â”‚
â”‚       â”‚        â”‚                       â”‚   â”‚                   â”‚
â”‚       â–¼        â–¼                       â–¼   â–¼                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚   â”‚      å˜å…ƒé¸æŠ                               â”‚               â”‚
â”‚   â”‚  (é‡‘å±/æ°´/ç©ºæ°—/å†·å´)                       â”‚               â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚             â”‚                                                   â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”                                             â”‚
â”‚       â”‚            â”‚                                             â”‚
â”‚       â–¼            â–¼                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚
â”‚   â”‚ äºˆæƒ³   â”‚â”€â”€â–¶â”‚ å®Ÿé¨“     â”‚                                    â”‚
â”‚   â”‚æ®µéš    â”‚   â”‚(è¨˜éŒ²)    â”‚                                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚       â”‚              â”‚                                           â”‚
â”‚       â”‚              â”‚                                           â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚
â”‚              â”‚                                                   â”‚
â”‚              â–¼                                                   â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚          â”‚ è€ƒå¯Ÿ   â”‚                                              â”‚
â”‚          â”‚æ®µéš    â”‚                                              â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚              â”‚                                                   â”‚
â”‚              â–¼                                                   â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                              â”‚
â”‚        â”‚ å­¦ç¿’å®Œäº† â”‚                                              â”‚
â”‚        â”‚ãƒ­ã‚°ä¿å­˜ â”‚                                              â”‚
â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                              â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¢ã‚¯ã‚¿ãƒ¼

| ã‚¢ã‚¯ã‚¿ãƒ¼ | èª¬æ˜ | ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ |
|---------|------|----------|
| **å­¦ç¿’è€…(å…ç«¥)** | å°å­¦4å¹´ç”Ÿ | ã‚¯ãƒ©ã‚¹ãƒ»å‡ºå¸­ç•ªå·é¸æŠ â†’ å˜å…ƒé¸æŠ â†’ äºˆæƒ³ã‚¹ãƒ†ãƒ¼ã‚¸(AIå¯¾è©±) â†’ è€ƒå¯Ÿã‚¹ãƒ†ãƒ¼ã‚¸(AIå¯¾è©±) |
| **æ•™å“¡** | å­¦ç´šæ‹…ä»» | å­¦ç¿’ãƒ­ã‚°ç¢ºèªã€ç”Ÿå¾’é€²æ—ç®¡ç†ã€ãƒãƒ¼ãƒˆå†™çœŸç¢ºèª |
| **AI(OpenAI)** | gpt-4o-mini | å¯¾è©±å¿œç­”ã€è¦ç´„ç”Ÿæˆã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æä¾› |

---

## 3. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3.1 å…¨ä½“æ§‹æˆå›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ãƒ–ãƒ©ã‚¦ã‚¶ (ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  HTML/CSS/JavaScript (Bootstrap 5, Vanilla JS)                â”‚  â”‚
â”‚  â”‚  - prediction.html       (äºˆæƒ³ã‚¹ãƒ†ãƒ¼ã‚¸)                       â”‚  â”‚
â”‚  â”‚  - reflection.html       (è€ƒå¯Ÿã‚¹ãƒ†ãƒ¼ã‚¸)                       â”‚  â”‚
â”‚  â”‚  - select_unit.html      (å˜å…ƒé¸æŠ)                           â”‚  â”‚
â”‚  â”‚  - teacher/dashboard.html (æ•™å“¡å‘ã‘ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰)            â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Flask (Python 3.12)  - ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  app.py (ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³)                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ ãƒ«ãƒ¼ãƒˆ (Routes)                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /             (ãƒ›ãƒ¼ãƒ )                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /select_class (ã‚¯ãƒ©ã‚¹é¸æŠ)                        â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /select_number(å‡ºå¸­ç•ªå·é¸æŠ)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /select_unit  (å˜å…ƒé¸æŠ)                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /prediction   (äºˆæƒ³ã‚¹ãƒ†ãƒ¼ã‚¸)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - POST /chat         (AIå¯¾è©±)                            â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - POST /summary      (äºˆæƒ³ã¾ã¨ã‚ç”Ÿæˆ)                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /reflection   (è€ƒå¯Ÿã‚¹ãƒ†ãƒ¼ã‚¸)                      â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - POST /reflect_chat (è€ƒå¯Ÿå¯¾è©±)                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - POST /final_summary(è€ƒå¯Ÿã¾ã¨ã‚ç”Ÿæˆ)                    â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - GET  /teacher      (æ•™å“¡ãƒ­ã‚°ã‚¤ãƒ³)                      â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚  â”‚  â”‚ ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯                                          â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - get_ai_response()        (OpenAI APIå‘¼ã³å‡ºã—)         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - get_initial_ai_message() (åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—)         â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - validate_summary()       (è¦ç´„ã®å†…å®¹æ¤œè¨¼)             â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - save_learning_log()      (å­¦ç¿’ãƒ­ã‚°ä¿å­˜)               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - load_learning_logs()     (ãƒ­ã‚°èª­ã¿è¾¼ã¿)               â”‚ â”‚  â”‚
â”‚  â”‚  â”‚ - update_student_progress()ï¼ˆé€²æ—æ›´æ–°ï¼‰                â”‚ â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ REST API Call
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                                 â”‚
        â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  OpenAI API      â”‚              â”‚  ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸      â”‚
â”‚  (gpt-4o-mini)   â”‚              â”‚                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚  - session_storage.json â”‚
                                  â”‚  - learning_progress.json
                                  â”‚  - logs/                â”‚
                                  â”‚    learning_log_*.json  â”‚
                                  â”‚  - prompts/             â”‚
                                  â”‚  - templates/           â”‚
                                  â”‚  - static/              â”‚
                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã®æµã‚Œ                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€æ–°è¦é–‹å§‹æ™‚ (resume=false)ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /predictionâ”‚
â”‚ resume=false   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ session.clear()          â”‚
â”‚ ã™ã¹ã¦ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆæœŸåŒ–  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°è¦ä¼šè©±ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹    â”‚
â”‚ - conversation: []       â”‚
â”‚ - summary: ''            â”‚
â”‚ - summary_created: False â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆæœŸAIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¿½åŠ      â”‚
â”‚ conversation: [{         â”‚
â”‚   role: 'assistant',     â”‚
â”‚   content: '...'         â”‚
â”‚ }]                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ learning_log ã«è¨˜éŒ²      â”‚
â”‚ (log_type: 'prediction') â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ (resume=true)ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET /predictionâ”‚
â”‚ resume=true    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ conversationå–å¾—  â”‚
â”‚ (å­˜åœ¨ã™ã‚‹å ´åˆã¯å¾©å¸°)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¦ç´„ãŒå®Œäº†ã—ã¦ã„ãŸå ´åˆ          â”‚
â”‚ å‰å›ã®è¦ç´„ã‚’å¾©å¸°                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å…ƒã®ä¼šè©±çŠ¶æ…‹ã§å†é–‹               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€æ–°è¦å˜å…ƒé¸æŠæ™‚ã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç•°ãªã‚‹ unit ã«ç§»å‹•   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ—§å˜å…ƒã®ä¼šè©±ã‚’ãƒãƒƒãƒ—     â”‚
â”‚ session.pop('unit'...)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–°è¦ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹       â”‚
â”‚ (resume=false æ‰±ã„)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 4.1 äºˆæƒ³ã‚¹ãƒ†ãƒ¼ã‚¸ã®ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
ã€åˆæœŸåŒ–ãƒ•ã‚§ãƒ¼ã‚ºã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œäºˆæƒ³ã‚’ã—ã‚ˆã†ã€ã‚’ã‚¯ãƒªãƒƒã‚¯                      â”‚
â”‚    GET /prediction?class=5&number=30&unit=ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Flask: å˜å…ƒæƒ…å ±ã¨ã‚¿ã‚¹ã‚¯èª­ã¿è¾¼ã¿â”‚
        â”‚ - prompts/ ã‹ã‚‰åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â”‚
        â”‚ - tasks/ ã‹ã‚‰èª²é¡Œæ–‡èª­ã¿è¾¼ã¿    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
                     â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ HTML: prediction.html ë Œë”ë§   â”‚
        â”‚ - èª²é¡Œæ–‡è¡¨ç¤º                   â”‚
        â”‚ - ì´ˆê¸°AIë©”ì‹œì§€ í‘œì‹œ             â”‚
        â”‚ - ì…ë ¥ í•„ë“œ í‘œì‹œ                â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ DOM Ready              â”‚
       â”‚ JavaScript ì´ˆê¸°í™”      â”‚
       â”‚ - ì´ë²¤íŠ¸ãƒªã‚¹ãƒŠãƒ¼ç™»éŒ²   â”‚
       â”‚ - session state í™•ì¸   â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ëŒ€è¯ ãƒ•ã‚§ãƒ¼ã‚ºã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. å…ç«¥ãŒå…¥åŠ›ã—ã¦ã€Œé€ä¿¡ã€ã‚’ã‚¯ãƒªãƒƒã‚¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ JavaScript ì…ë ¥ ê²€ì¦     â”‚
  â”‚ - ê³µë°± ì²´í¬             â”‚
  â”‚ - ê¸¸ì´ í™•ì¸             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ POST /chat                  â”‚
  â”‚ Body: {                      â”‚
  â”‚   "message": "å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ"  â”‚
  â”‚ }                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Flask: get_ai_response()           â”‚
  â”‚ â‘  session['conversation'] ã‚’å–å¾—   â”‚
  â”‚ â‘¡ OpenAI API ã«é€ä¿¡               â”‚
  â”‚    - model: gpt-4o-mini            â”‚
  â”‚    - messages: [                   â”‚
  â”‚        {role: user, content: ...}  â”‚
  â”‚      ]                             â”‚
  â”‚    - system prompt from ë‹¨ì›ë³„    â”‚
  â”‚ â‘¢ AIì‘ë‹µ ë°›ê¸°                      â”‚
  â”‚ â‘£ session['conversation'] æ›´æ–°    â”‚
  â”‚ â‘¤ learning_log ã«è¨˜éŒ²             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Response JSON:             â”‚
  â”‚ {                          â”‚
  â”‚   "response": "AIå¿œç­”",     â”‚
  â”‚   "message_count": 4,      â”‚
  â”‚   "suggest_summary": false â”‚
  â”‚ }                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ JavaScript: ì‘ë‹µ í‘œì‹œ     â”‚
  â”‚ - AIë©”ì‹œì§€ ã‚’è¿½åŠ          â”‚
  â”‚ - ãƒãƒ£ãƒƒãƒˆç”»é¢ ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«  â”‚
  â”‚ - ì…ë ¥ í•„ë“œ í´ë¦¬ì–´         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€ã¾ã¨ã‚ ãƒ•ã‚§ãƒ¼ã‚ºã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. å…ç«¥ãŒã€Œäºˆæƒ³ã‚’ã¾ã¨ã‚ã‚‹ã€ã‚’ã‚¯ãƒªãƒƒã‚¯â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ JavaScript: ç¡®è®¤ ãƒ€ã‚¤ã‚¢ãƒ­ã‚°    â”‚
  â”‚ (æ—¢ã«ã¾ã¨ã‚ãŸå ´åˆ)            â”‚
  â”‚ â†“                              â”‚
  â”‚ ãƒšãƒ¼ã‚¸ãƒªãƒ­ãƒ¼ãƒ‰ (resume=false) â”‚
  â”‚ ã¾ãŸã¯                         â”‚
  â”‚ POST /summary               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Flask: /summary ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ        â”‚
  â”‚ â‘  conversation ã‹ã‚‰ user messageæŠ½å‡ºâ”‚
  â”‚ â‘¡ validate_summary() ã§ ê²€è¨¼        â”‚
  â”‚    - ãƒ¦ãƒ¼ã‚¶ãƒ¼ë©”ì‹œì§€ æ•° > 0 ?       â”‚
  â”‚    - ë‚´ìš© ê¸¸ì´ >= 10ì ?          â”‚
  â”‚    - ê²½í—˜/ì´ìœ  í‚¤ì›Œë“œ í¬í•¨ ?       â”‚
  â”‚ â‘¢ æ¤œè¨¼ å¤±æ•— â†’ 400ã‚¨ãƒ©ãƒ¼è¿”å´       â”‚
  â”‚ â‘£ æ¤œì¦ æˆåŠŸ â†’ ã¾ã¨ã‚ç”Ÿæˆ          â”‚
  â”‚    OpenAI API í˜¸ì¶œ               â”‚
  â”‚ â‘¤ ê²°ê³¼ã‚’ session ã¨ log ã«ä¿å­˜    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Response JSON:             â”‚
  â”‚ {                          â”‚
  â”‚   "summary": "ã¾ã¨ã‚æ–‡"    â”‚
  â”‚ }                          â”‚
  â”‚ ã¾ãŸã¯                     â”‚
  â”‚ {                          â”‚
  â”‚   "error": "ã‚¨ãƒ©ãƒ¼ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸"â”‚
  â”‚ }                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ JavaScript:                â”‚
  â”‚ - ì„±ê³µ: ã¾ã¨ã‚è¡¨ç¤º         â”‚
  â”‚   ì…ë ¥ í•„ë“œ éè¡¨ç¤º          â”‚
  â”‚   ã¾ã¨ã‚ãƒœã‚¿ãƒ³ éè¡¨ç¤º       â”‚
  â”‚ - ì‹¤íŒ¨: alert í‘œì‹œ         â”‚
  â”‚   ì‚¬ìš©ìì—ê²Œ ì¬ì…ë ¥ ä¿ƒì§„  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€æœ€çµ‚åŒ– ãƒ•ã‚§ãƒ¼ã‚ºã€‘
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. å…ç«¥ãŒã€Œæ¬¡ã¸ã€ã‚’ã‚¯ãƒªãƒƒã‚¯        â”‚
â”‚    (å®Ÿé¨“ã‚¹ãƒ†ãƒ¼ã‚¸ã¸ç§»å‹•)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ session ä¿å­˜           â”‚
  â”‚ - conversation_history â”‚
  â”‚ - summary              â”‚
  â”‚ - summary_created flag â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ ë‹¤ìŒ ã‚¹ãƒ†ãƒ¼ã‚¸ã¸é·ç§»    â”‚
  â”‚ GET /experiment        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹/ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸æ§‹æˆ

```
ã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã€‘

session_storage.json
â”œâ”€ session_id: {...}
â”‚  â”œâ”€ class_number: "5"
â”‚  â”œâ”€ student_number: "30"
â”‚  â”œâ”€ unit: "ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©"
â”‚  â”œâ”€ conversation: [
â”‚  â”‚  {
â”‚  â”‚    role: "assistant",
â”‚  â”‚    content: "åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸..."
â”‚  â”‚  },
â”‚  â”‚  {
â”‚  â”‚    role: "user",
â”‚  â”‚    content: "ã€Œäºˆæƒ³ã§ã™ãŒ...ã€"
â”‚  â”‚  },
â”‚  â”‚  {
â”‚  â”‚    role: "assistant",
â”‚  â”‚    content: "ã€Œãã†ã§ã™ã­...ã€"
â”‚  â”‚  }
â”‚  â”‚]
â”‚  â”œâ”€ prediction_summary: "ã¾ã¨ã‚..."
â”‚  â”œâ”€ prediction_summary_created: true
â”‚  â””â”€ timestamp: "2025-11-16 22:55:00"
â””â”€ ...

learning_progress.json
â”œâ”€ student_key (class_number:student_number): {
â”‚  â”œâ”€ class_number: "5"
â”‚  â”œâ”€ student_number: "30"
â”‚  â”œâ”€ units: {
â”‚  â”‚  â”‚"ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©": {
â”‚  â”‚  â”‚  â”œâ”€ stage: "reflection"
â”‚  â”‚  â”‚  â”œâ”€ prediction_summary_created: true
â”‚  â”‚  â”‚  â”œâ”€ reflection_summary_created: false
â”‚  â”‚  â”‚  â”œâ”€ last_access: "2025-11-16 22:55:00"
â”‚  â”‚  â”‚  â””â”€ conversation_history: [...]
â”‚  â”‚  â””â”€}
â”‚  â””â”€}
â”‚  â””â”€ last_access: "2025-11-16 22:55:00"
â””â”€}

logs/learning_log_20251116.json
â”œâ”€ {
â”‚  â”œâ”€ timestamp: "2025-11-16 22:45:30"
â”‚  â”œâ”€ student_number: "30"
â”‚  â”œâ”€ class_number: "5"
â”‚  â”œâ”€ unit: "ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©"
â”‚  â”œâ”€ log_type: "prediction"
â”‚  â”œâ”€ data: {
â”‚  â”‚  â”œâ”€ user_message: "ì•„...
â”‚  â”‚  â”œâ”€ ai_response: "ì¢‹ì€ ì˜ˆì‹œë„¤ìš”..."
â”‚  â”‚  â””â”€ message_count: 1
â”‚  â”‚}
â”‚  â””â”€ stage: "prediction"
â”œâ”€},
â”œâ”€ {
â”‚  â”œâ”€ timestamp: "2025-11-16 22:55:40"
â”‚  â”œâ”€ student_number: "30"
â”‚  â”œâ”€ log_type: "prediction_summary"
â”‚  â”œâ”€ data: {
â”‚  â”‚  â”œâ”€ summary: "ã‚ãŸãŸã‚ã‚‹ã¨..."
â”‚  â”‚  â””â”€ conversation: [...]
â”‚  â”‚}
â”œâ”€},
â””â”€ ...

prompts/
â”œâ”€ initial_messages.json {
â”‚  â”œâ”€ "ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©": "ã“ã‚“ã«ã¡ã¯ã€‚..."
â”‚  â”œâ”€ "é‡‘å±ã®ã‚ãŸãŸã¾ã‚Šæ–¹": "..."
â”‚  â””â”€ ...
â”‚}
â”œâ”€ ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©.md       (ë‹¨ì›ë³„ system prompt)
â”œâ”€ é‡‘å±ã®ã‚ãŸãŸã¾ã‚Šæ–¹.md
â”œâ”€ æ°´ã®ã‚ãŸãŸã¾ã‚Šæ–¹.md
â””â”€ æ°´ã‚’å†·ã‚„ã—ç¶šã‘ãŸæ™‚ã®æ¸©åº¦ã¨æ§˜å­.md

ã€æœ¬ç•ªç’°å¢ƒ (Google Cloud)ã€‘

Cloud Firestore
â””â”€ students/{class}/{number}/units/{unit}
   â”œâ”€ conversation_history: [...]
   â”œâ”€ prediction_summary: "..."
   â”œâ”€ reflection_summary: "..."
   â””â”€ timestamps: {...}

Google Cloud Storage (gs://bucket/)
â”œâ”€ logs/
â”‚  â””â”€ learning_log_{date}.json
â”œâ”€ uploads/
â”‚  â””â”€ note_photos/{class}/{number}/{photo_id}.jpg
â””â”€ ...
```

---

## 5. ãƒ‡ãƒ¼ã‚¿æµå‹•å›³

```
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  å…ç«¥ å…¥åŠ›                   â”‚
          â”‚ (ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰/éŸ³å£°)           â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Input Validation (JS)          â”‚
        â”‚ - ç©ºç™½ãƒã‚§ãƒƒã‚¯                 â”‚
        â”‚ - é•·ã•ãƒã‚§ãƒƒã‚¯ (æœ€å°1æ–‡å­—)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ POST /chat                     â”‚
        â”‚ {                              â”‚
        â”‚   "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›"    â”‚
        â”‚ }                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Flask Backend                           â”‚
        â”‚                                         â”‚
        â”‚ 1. Session ã‹ã‚‰ conversation å–å¾—     â”‚
        â”‚ 2. ãƒ¦ãƒ¼ã‚¶ãƒ¼ë©”ì‹œì§€ã‚’ conversation ã« è¿½ê°€â”‚
        â”‚ 3. OpenAI API í˜¸ì¶œ                     â”‚
        â”‚    - Model: gpt-4o-mini                â”‚
        â”‚    - Temperature: 0.7                  â”‚
        â”‚    - Max Tokens: 500                   â”‚
        â”‚    - System prompt: prompts/XXX.md    â”‚
        â”‚    - Messages: conversation            â”‚
        â”‚ 4. AIåº”ë‹µ å—å–                         â”‚
        â”‚ 5. Sessionæ›´æ–°                         â”‚
        â”‚ 6. Learning Log ì €ì¥                   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Response JSON                  â”‚
        â”‚ {                              â”‚
        â”‚   "response": "...",           â”‚
        â”‚   "message_count": 4,          â”‚
        â”‚   "suggest_summary": false     â”‚
        â”‚ }                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ JavaScript: ì‘ë‹µ å‡¦ç†          â”‚
        â”‚ - HTMLì— ì‘ë‹µ ì¶”ê°€            â”‚
        â”‚ - ãƒãƒ£ãƒƒãƒˆí™”ë©´ ì—…ë°ì´íŠ¸        â”‚
        â”‚ - ì…ë ¥ í•„ë“œ ãƒªã‚»ãƒƒãƒˆ          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ UI è¡¨ç¤º                        â”‚
        â”‚ - AIå›åº” ãƒãƒ£ãƒƒãƒˆ í‘œì‹œ        â”‚
        â”‚ - ì…ë ¥ í•„ë“œ ready             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  å…ç«¥ã€Œäºˆæƒ³ã‚’ã¾ã¨ã‚ã‚‹ã€ãƒœã‚¿ãƒ³ â”‚
        â”‚  í´ë¦­                        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ JavaScript: ãƒœã‚¿ãƒ³çŠ¶æ…‹ç¡®è®¤    â”‚
        â”‚ - æ—¢ã«ã¾ã¨ã‚ãŸ?               â”‚
        â”‚   YES â†’ confirm() í‘œì‹œ       â”‚
        â”‚   NO  â†’ /summary í˜¸ì¶œ        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ POST /summary                  â”‚
        â”‚ {}                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Flask: /summary ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ         â”‚
        â”‚                                        â”‚
        â”‚ 1. Session ã‹ã‚‰ conversation å–å¾—    â”‚
        â”‚ 2. Validate Summary():                â”‚
        â”‚    a) ãƒ¦ãƒ¼ã‚¶ãƒ¼ë©”ì‹œì§€ å­˜åœ¨?           â”‚
        â”‚    b) æœ€å°æ–‡å­—æ•° >= 10?             â”‚
        â”‚    c) ê²½í—˜/ì´ìœ  í‚¤ì›Œë“œ í¬í•¨?        â”‚
        â”‚    â†’ æ¤œè¨¼å¤±æ•—: 400 ã‚¨ãƒ©ãƒ¼è¿”å´       â”‚
        â”‚ 3. OpenAI API í˜¸ì¶œ:                  â”‚
        â”‚    ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ: "conversationsì—ì„œìš”  â”‚
        â”‚              ìš”ì ã‚’ì •ë¦¬ã—ã¦ìš”ì•½í•˜ê¸°"â”‚
        â”‚ 4. è¦ç´„ê²°ê³¼ Session & Log ì €ì¥       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Response                       â”‚
        â”‚ {                              â”‚
        â”‚   "summary": "ã¾ã¨ã‚æ–‡",       â”‚
        â”‚   "session_id": "xxx",         â”‚
        â”‚   "log_id": "yyy"              â”‚
        â”‚ }                              â”‚
        â”‚ ã¾ãŸã¯                         â”‚
        â”‚ {                              â”‚
        â”‚   "error": "...",              â”‚
        â”‚   "is_insufficient": true      â”‚
        â”‚ }                              â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
                  â”‚          â”‚
            æˆåŠŸ  â–¼          â–¼ å¤±æ•—
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ã¾ã¨ã‚è¡¨ç¤º      â”‚  â”‚alertè¡¨ç¤º â”‚
        â”‚ãƒœã‚¿ãƒ³éè¡¨ç¤º    â”‚  â”‚å†å…¥åŠ›ä¿ƒé€²â”‚
        â”‚â†“              â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚Learning Log   â”‚
        â”‚ì €ì¥           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆä»•æ§˜

### 6.1 ãƒãƒ£ãƒƒãƒˆ API

```
POST /chat
Content-Type: application/json

Request Body:
{
  "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ãƒ†ã‚­ã‚¹ãƒˆ"
}

Response (Success):
{
  "response": "AIã®å¿œç­”ãƒ†ã‚­ã‚¹ãƒˆ",
  "message_count": 4,  // ì´ ë©”ì‹œì§€ ìˆ˜
  "suggest_summary": false,  // ã¾ã¨ã‚æ¨å¥¨?
  "timestamp": "2025-11-16T22:55:00Z"
}

Response (Error):
{
  "error": "ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
  "status": 400 or 500
}
```

### 6.2 ã¾ã¨ã‚ç”Ÿæˆ API

```
POST /summary
Content-Type: application/json

Request Body:
{}

Response (Success):
{
  "summary": "ã¾ã¨ã‚ëœ æ–‡ç« ",
  "conversation_length": 8,
  "tokens_used": 350
}

Response (Validation Error - 400):
{
  "error": "ã¾ã ä½•ã‚‚è©±ã—ã¦ã„ãªã„ã‚ˆã†ã§ã™ã€‚ã‚ãªãŸã®äºˆæƒ³ã‚„è€ƒãˆã‚’æ•™ãˆã¦ãã ã•ã„ã€‚",
  "is_insufficient": true
}

Response (Server Error - 500):
{
  "error": "ã¾ã¨ã‚ç”Ÿæˆä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚"
}
```

### 6.3 ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸° API

```
GET /prediction?class=5&number=30&unit=ç©ºæ°—ã®æ¸©åº¦ã¨ä½“ç©&resume=true

Query Parameters:
- class: ã‚¯ãƒ©ã‚¹ç•ªå· (1-4 or ç ”ç©¶å®¤)
- number: å‡ºå¸­ç•ªå· (1-30)
- unit: å˜å…ƒå
- resume: ã‚»ãƒƒã‚·ãƒ§ãƒ³å¾©å¸°ãƒ•ãƒ©ã‚° (true/false)

Response:
HTML (prediction.html)
+ session data åŸ‹ã‚è¾¼ã¿ (JSON)
```

---

## 7. éŸ³å£°å…¥åŠ›æ©Ÿèƒ½ã®ä»•æ§˜

### 7.1 éŸ³å£°èªè­˜ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éŸ³å£°å…¥åŠ›ãƒœã‚¿ãƒ³ ã‚¯ãƒªãƒƒã‚¯                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Web Speech API åˆæœŸåŒ–      â”‚
    â”‚ - language: 'ja-JP'        â”‚
    â”‚ - continuous: true         â”‚
    â”‚ - interimResults: true     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ãƒã‚¤ã‚¯æ¥ç¶š & ê¶Œí•œìš”ì²­          â”‚
    â”‚ (ãƒ–ãƒ©ã‚¦ã‚¶ prompt)               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    í—ˆå¯    â”‚          â”‚  ê±°ì ˆ
    â–¼       â–¼          â–¼
â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚OK  â”‚  â”‚error â”‚ â”‚alertè¡¨ç¤ºâ”‚
â””â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ éŸ³å£°èªè­˜é–‹å§‹                      â”‚
â”‚ ã‚¤ãƒ™ãƒ³ãƒˆ: onstart                â”‚
â”‚ - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ "éŸ³å£°ã‚’èªè­˜ä¸­..."   â”‚
â”‚ - ãƒœã‚¿ãƒ³å¤‰æ›´ (åœæ­¢ãƒœã‚¿ãƒ³ã«)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ìŒì„± ãƒ‡ãƒ¼ã‚¿ìˆ˜ì§‘ & ì¸ì‹     â”‚
    â”‚ (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å‡¦ç†)           â”‚
    â”‚ ã‚¤ãƒ™ãƒ³ãƒˆ: onresult          â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ â”‚ é€”ä¸­ê²°ê³¼ (interim)       â”‚â”‚
    â”‚ â”‚ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã®ã¿        â”‚â”‚
    â”‚ â”‚ "ğŸ¤ èªè­˜ä¸­: ..."          â”‚â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
    â”‚ â”‚ ç¢ºå®šê²°ê³¼ (final)          â”‚â”‚
    â”‚ â”‚ ì…ë ¥ í•„ë“œì— ì¶”ê°€          â”‚â”‚
    â”‚ â”‚ event.resultIndex ã§      â”‚â”‚
    â”‚ â”‚ é‡è¤‡ ë°©ì§€                 â”‚â”‚
    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
                  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ åœæ­¢ãƒœã‚¿ãƒ³ ã‚¯ãƒªãƒƒã‚¯   â”‚
        â”‚ ã¾ãŸã¯                â”‚
        â”‚ éŸ³å£°ç„¡ã åœæ­¢        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ éŸ³å£°èªè­˜çµ‚äº†                â”‚
    â”‚ ã‚¤ãƒ™ãƒ³ãƒˆ: onend            â”‚
    â”‚ - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ éè¡¨ç¤º        â”‚
    â”‚ - ãƒœã‚¿ãƒ³å…ƒã«æˆ»ã™            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
                   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ì…ë ¥ í•„ë“œ æº–å‚™å®Œäº†   â”‚
        â”‚ (ë©”ì‹œì§€ ì „ì†¡ å¯ëŠ¥)  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 äºŒé‡å…¥åŠ› é˜²æ­¢ãƒ­ã‚¸ãƒƒã‚¯

```
ã€å•é¡Œã€‘
éŸ³å£°èªè­˜ã® onresult ã‚¤ãƒ™ãƒ³ãƒˆãŒè¤‡æ•°å›ç™ºç«
â†’ é€”ä¸­ê²°ê³¼ + ç¢ºå®šç»“ê³¼ ãŒé‡ë³µ è¿½ê°€

ã€è§£æ±ºã€‘
event.resultIndex ã‚’ä½¿ç”¨
â†’ å‰å›å¤„ç†æ¸ˆã¿ã®çµæœã‚’ã‚¹ã‚­ãƒƒãƒ—

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ onresult Event              â”‚
â”‚                             â”‚
â”‚ for (i = event.resultIndex) â”‚
â”‚ {                           â”‚
â”‚   - æ–°ã—ã„çµæœã®ã¿å‡¦ç†      â”‚
â”‚   - å‰å›ã®çµæœã‚’ã‚¹ã‚­ãƒƒãƒ—    â”‚
â”‚ }                           â”‚
â”‚                             â”‚
â”‚ if (isFinal) {              â”‚
â”‚   input.value += transcript â”‚  // ç¢ºå®šã®ã¿è¿½åŠ 
â”‚ }                           â”‚
â”‚                             â”‚
â”‚ // é€”ä¸­çµæœã¯è¡¨ç¤ºã®ã¿       â”‚
â”‚ if (interim) {              â”‚
â”‚   statusText = 'ğŸ¤ ...'     â”‚  // UIæ›´æ–°
â”‚ }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 8.1 å…¥åŠ›æ£€è¯

```
ã€Chat APIã€‘
- ë©”ì‹œì§€ éç©º âœ“
- æœ€å°æ–‡å­—æ•¸ >= 1 âœ“
- æœ€å¤§æ–‡å­—æ•¸ <= 5000 (äºˆå®š)
- SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³ ãƒã‚§ãƒƒã‚¯ (äºˆå®š)
- XSS å¯¾ç­– (HTML ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—)

ã€Summary APIã€‘
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ë©”ì‹œì§€ å­˜åœ¨ âœ“
- æœ€å°æ–‡å­—æ•¸ >= 10 âœ“
- ê²½í—˜/ì´ìœ  í‚¤ì›Œë“œ í¬í•¨ âœ“
```

### 8.2 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```
ã€ãƒ•ãƒ­ãƒ³ãƒˆå´ã€‘
try {
  POST /chat
} catch(error) {
  if (error.message) {
    alert('âš ï¸ ' + error.message)  â† ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«è¡¨ç¤º
  }
  button.disabled = false  â† ãƒœã‚¿ãƒ³ì¬í™œì„±åŒ–
}

ã€ãƒãƒƒã‚¯å´ã€‘
try {
  response = openai.chat.completions.create(...)
} except OpenAIError as e:
  return jsonify({'error': 'APIã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿ'}), 500
except Exception as e:
  log.error(e)
  return jsonify({'error': 'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼'}), 500
```

---

## 9. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

```
ã€ãƒ•ãƒ­ãƒ³ãƒˆã€‘
- JavaScript minify (æœ¬ç•ª)
- CSS æœ€é©åŒ–
- ç”»åƒ compress
- Lazy Loading (å®Ÿè£…äºˆå®š)

ã€ãƒãƒƒã‚¯ã€‘
- LRU Cache: get_initial_ai_message()
- Session compression (å¤§ä¼šè©±ç”¨)
- Batch logging (è¤‡æ•°ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)
- Connection Pooling (æœ¬ç•ª)

ã€APIã€‘
- Rate limiting (æœ¬ç•ªãƒ»Google Cloud)
- Tokenåˆ¶é™: max_tokens=500
- Temperature: 0.7 (å¤šæ§˜æ€§ã¨å®‰å®šæ€§ã®ãƒãƒ©ãƒ³ã‚¹)
```

---

## 10. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™º
```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
echo "OPENAI_API_KEY=sk-..." > .env
python app.py
# http://localhost:5014
```

### Google Cloud Run æœ¬ç•ª
```bash
gcloud run deploy science-buddy \
  --source . \
  --platform managed \
  --region asia-northeast1 \
  --set-env-vars OPENAI_API_KEY=...,FLASK_ENV=production
```

---

## 11. ä»Šå¾Œã®æ‹¡å¼µäºˆå®š

- [ ] éŸ³å£°å‡ºåŠ› (TTS) æ©Ÿèƒ½
- [ ] æ•™å“¡å‘ã‘å¯è¦–åŒ–ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ”¹å–„
- [ ] è¤‡æ•°è¨€èªå¯¾å¿œ (è‹±èªç­‰)
- [ ] ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªåŒ–
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ í˜‘åƒ (è¤‡æ•°ç”Ÿå¾’)
- [ ] å­¦ç¿’åˆ†æ AI (å­¦ç¿’å‚¾å‘åˆ†æ)

