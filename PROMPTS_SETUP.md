# プロンプトファイルのセットアップガイド

## 必要なプロンプトファイル一覧

app.py は以下のプロンプトファイルを自動で読み込みます。

### 対話用プロンプト（各ユニット固有）

1. **`prompts/金属のあたたまり方.md`**
   - 用途: 予想段階と考察段階の対話で使用
   - 呼び出し: `/chat` と `/reflect_chat` エンドポイント
   - 役割: 児童とのソクラテス式対話ガイドライン

2. **`prompts/水のあたたまり方.md`**
   - 用途: 予想段階と考察段階の対話で使用
   - 呼び出し: `/chat` と `/reflect_chat` エンドポイント

3. **`prompts/空気の温度と体積.md`**
   - 用途: 予想段階と考察段階の対話で使用
   - 呼び出し: `/chat` と `/reflect_chat` エンドポイント

4. **`prompts/水を熱し続けた時の温度と様子.md`**
   - 用途: 予想段階と考察段階の対話で使用
   - 呼び出し: `/chat` と `/reflect_chat` エンドポイント

### まとめ用プロンプト（全ユニット共通）

5. **`prompts/予想_summary.md`**
   - 用途: 予想段階の対話内容をまとめる
   - 呼び出し: `/summary` エンドポイント
   - 役割: 児童の予想文を生成するためのガイドライン

6. **`prompts/考察_final_summary.md`**
   - 用途: 考察段階の対話内容をまとめる
   - 呼び出し: `/final_summary` エンドポイント
   - 役割: 児童の考察文を生成するためのガイドライン

## ファイルの内容

### 対話用プロンプトの内容例

各ユニット別のプロンプトファイルには、以下のような内容を記述してください：

- **AIの役割**: 児童の思考を引き出すソクラテス式対話を実践
- **基本姿勢**: 答えを言わず、質問で児童の思考を促す
- **対話パターン**: 予想の理由を聞く、経験を引き出すなど
- **避けるべき内容**: 科学用語の説明、直接的な答え、誘導的な質問

### まとめ用プロンプトの内容例

まとめ用プロンプトには、以下のような内容を記述してください：

- **制約**: 対話に出てこなかった内容は追加しない
- **使用する内容**: 児童が実際に発言した言葉や表現のみ
- **形式**: 予想文や考察文の定型フォーマット
- **禁止事項**: マークダウン記法、科学用語の追加など

## ファイルが見つからない場合

`load_unit_prompt()` 関数には以下のフォールバックが実装されています：

- ファイルが存在しない場合: 基本的なフォールバックメッセージを返す
- ファイルが空の場合: 基本的なフォールバックメッセージを返す

フォールバック: `"児童の発言をよく聞いて、適切な質問で考えを引き出してください。"`

## 動作確認

app.py で以下の方法でプロンプト読み込みをテストできます：

```python
# Python環境で実行
from app import load_unit_prompt

# 各プロンプトが正しく読み込まれるか確認
print(load_unit_prompt("金属のあたたまり方"))
print(load_unit_prompt("予想_summary"))
print(load_unit_prompt("考察_final_summary"))
```

## 現在の状態

✅ app.py は全てのプロンプトファイルの読み込みに対応済み
✅ フォールバック機能により、ファイルがない場合でも動作
✅ プロンプトファイルは別ファイルで管理（app.pyに埋め込まない）

各ユニットのプロンプトを `prompts/` ディレクトリに手作成してください。
